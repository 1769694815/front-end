> 防抖与节流函数是一种最常用的 高频触发 优化方式，能对性能有较大的帮助。

> 两种优化方式有很多实现方法，本篇只介绍几种实现思路。

## 防抖

* 防抖 (debounce): 将多次高频操作优化为只在最后一次执行。
* 使用场景：用户输入，只需再输入完成后做一次输入校验即可。

```
function debounce(fn, wait, immediate) {
	// timer用来记录当前函数执行状态
    let timer = null

    return function() {
    	// 利用this和arguments获取作用域和变量
        let args = arguments
        let context = this

        if (immediate && !timer) {
            fn.apply(context, args)
        }
		// 清理掉正在执行的函数并重新执行
        if (timer) clearTimeout(timer)
        timer = setTimeout(() => {
            fn.apply(context, args)
        }, wait)
    }
}
```

## 节流
* 节流(throttle): 每隔一段时间后执行一次，也就是降低频率，将高频操作优化成低频操作。
* 使用场景: 滚动条事件 或者 resize 事件，通常每隔 100~500 ms执行一次即可。

```
function throttle(fn, wait, immediate) {
	// 设置记录状态的变量
    let timer = null
    let callNow = true
    
    return function() {
    	// 	利用this和arguments获取作用域和变量
        let context = this,
            args = arguments

        if (callNow) {
            fn.apply(context, args)
            callNow = false
        }
		// 设置执行定时器
        if (!timer) {
            timer = setTimeout(() => {
                fn.apply(context, args)
                timer = null
            }, wait)
        }
    }
}
```
