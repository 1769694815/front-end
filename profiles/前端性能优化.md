## 为什么要进行性能优化
* 用户: 提升用户体验，改善页面性能
* 开发者: 体现公司意志和开发人员技能

## 性能优化的总体方向
* 高效 ：合理安排资源
* 快速 ：减少等待时间

## 优化实践
### HTML/CSS优化
* 能用html/css解决的问题就不要用js
	* 更快的开发速度，更小的维护成本
	* 导航高亮、鼠标悬停
	
	```
	nav li {
		opacity: 0.5;
	}
	nav li:hover {
		opacity: 1;
	}
	```
	```
	.menu {
		display: none;
	}
	.nav:hover + .menu {
		display: inline-block;
	}
	.menu:before {
		content: '';
		position: absolute;
		top: -20px;
		left: 0px;
		width: 100%;
		height: 20px;
	```

	* 自定义样式与css伪类
		* 使用全局样式sass、scss
		
		`:focus`
		`input[type=checkbox]:checked{}`
		`max-width`
	
	* 使用form表单提交
* 优化HTML标签
	* 文字`<p>``<h1>`减少css代码
	* 表单`<form>`
	* 列表`<ol>``<ul>`
	* 图片`<img>``<picture>`
	* 链接`<a>``<button>`
	* 根据情况使用input type值
	* 使用HTML5语义化标签
	
	```
	<nav></nav>
	<header></header>
	<main>
		<section></section>
		<section></section>
	</main>
	<footer></footer>
	```

### js优化
* 减少前端代码耦合
	* 利用策略模式抽离公共组件、参数、封装请求
* js书写优化
	* 指明变量类型和返回类型
	
	```
	getPrice:function(price){
		if (price < 0) {
			return false;
		}else {
			return price * 10
		}
	}
	getPrice:function(price){
		if (price < 0) {
			return -1;
		}else {
			return price * 10
		}
	}
	//类型确定，解析器不会去做一些额外的的工作
	//优化回滚：编译器已经编译完成函数，类型变化导致回滚到通用状态，重新生成函数
	```
	
	* 减少作用域查找
	
	```
	<script>
		var map = document.querySelector('#imap');
		map.style.height = '10px';
	</script>
	<script>
		!function() {
			var map = document.querySelector('#imap');
			map.style.height = '10px';
		}
	</script>
	```
	
	* 避免 == 的使用
		* 确定类型的情况下直接使用===
* 使用ES6简化代码

### 页面优化
* 页面加载之前都经历了什么
	* DNS服务器通过域名查找对应的web服务器的ip地址
	* 三次握手机制、四次挥手机制
	* 返回资源
* 页面渲染过程优化
	 ![页面加载过程](../images/页面加载过程.png)
	* JavaScript=>Style=>Layout=>Paint=>Composite
	* dom深度尽量浅
	* 减少行内css和js的使用
	* 合适的选择器，避免后代选择器，通配符选择器
	* 异步加载js文件并合并js文件
* 加快页面的打开速度

	> 页面开启速度主要指标：白屏时间，首屏时间，页面加载完成时间，所有资源加载完成(例)
	* 减少渲染堵塞(js、css 例)
	* 延时加载图片，按需加载
	* 压缩和缓存(例)
		* gzip压缩、Cache-control、Etag
* 增强用户体验


### 用好Chrome Devtools
###区分代码优化、HTTP优化、网页加载优化
* 使用icon代替各种图片
* input组件开发利用html5属性148
* chorme浏览器同域最多发送6个tcp请求164  可更改