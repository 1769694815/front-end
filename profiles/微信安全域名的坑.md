* 整理一下最近微信内部分享后安全域名和微信配置出现的一些问题，勿喷

## 欣赏一波官方说明
* [微信网页授权官方文档](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1421140842)
* 具体的微信安全域名配置就不说了，大家都知道的，也可自行百度
* 略微提几点
	* 微信安全域名配置前需要在该域名根目录下放入微信官方的配置文件，并且可以访问到。
	* 域名配置仅配置域名就可以，不需要加上传输协议名称。
	* 大家可根据需要直接配置一级或者二级域名，避免以后重复添加和修改，微信安全域名同一个微信公众号仅可配置三个微信安全域名，每月仅支持修改三次。
	
	
## 踩过的那些坑
* invalid URL domain（域名绑定失败或者域名不存在）
	* 检查后台是否设置：右上角公众号名称--功能设置--JS接口安全域名
	* 检查代码里的appid和公众号后台的id是否一致
	* 一级域名，非80端口需要带端口号
* permission denied（接口权限问题）
	* 有的接口需要认证之后才可以使用
* invalid signature（大部分微信分享失效是因为这个报错）
	* 微信js文件未引入或者引入错误
		* 看传输协议，HTTPS引入外部HTTP文件有问题，将微信的JS文件传输协议改成HTTPS，该文件支持HTTPS传输
	* 生成签名的url(使用jssdk的页面地址，这个页面地址可以在浏览器访问)，包含“？”号后面的所有参数，不包含“#”号后面的值
		* 官方提供的解决方案 使用`encodeURIComponent(location.href.split('#')[0])即可`
	   * 未知原因会造成页面请求的url被encode，需要多加一层encode
